"use strict";exports.id=687,exports.ids=[687],exports.modules={1206:(e,s,a)=>{a.d(s,{Z:()=>l});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7075).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},573:(e,s,a)=>{a.d(s,{Z:()=>l});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7075).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3687:(e,s,a)=>{a.d(s,{d:()=>N});var l=a(5344),i=a(3729),r=a(3673),t=a(5094),c=a(6540),n=a(1838),d=a(8765),o=a(573),m=a(6327),h=a(8271),x=a(1206),u=a(7361),j=a(2690),p=a(8157),y=a(594),v=a(3061),g=a(4755);let f=({client:e,onSave:s,onCancel:a})=>{let{currentBusiness:n}=(0,v.i)(),[d,o]=(0,i.useState)({name:e?.name||"",email:e?.email||"",company:e?.company||"",phone:e?.phone||"",address:e?.address||"",preferred_currency:e?.preferred_currency||"USD",notes:e?.notes||""}),[m,h]=(0,i.useState)(!1),x=async a=>{if(a.preventDefault(),n){h(!0);try{if(e?.id){let{error:s}=await y.O.from("clients").update(d).eq("id",e.id);if(s)throw s;g.toast.success("Client updated successfully")}else{let{error:e}=await y.O.from("clients").insert({...d,business_id:n.id,freelancer_id:n.id});if(e)throw e;g.toast.success("Client created successfully")}s()}catch(e){g.toast.error(e.message||"Failed to save client")}finally{h(!1)}}};return(0,l.jsxs)(r.Zb,{children:[l.jsx(r.Ol,{children:l.jsx(r.ll,{children:e?"Edit Client":"Add New Client"})}),l.jsx(r.aY,{children:(0,l.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(u._,{htmlFor:"name",children:"Name *"}),l.jsx(c.I,{id:"name",value:d.name,onChange:e=>o({...d,name:e.target.value}),required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(u._,{htmlFor:"email",children:"Email *"}),l.jsx(c.I,{id:"email",type:"email",value:d.email,onChange:e=>o({...d,email:e.target.value}),required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(u._,{htmlFor:"company",children:"Company"}),l.jsx(c.I,{id:"company",value:d.company,onChange:e=>o({...d,company:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(u._,{htmlFor:"phone",children:"Phone"}),l.jsx(c.I,{id:"phone",value:d.phone,onChange:e=>o({...d,phone:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[l.jsx(u._,{htmlFor:"address",children:"Address"}),l.jsx(c.I,{id:"address",value:d.address,onChange:e=>o({...d,address:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(u._,{htmlFor:"currency",children:"Preferred Currency"}),(0,l.jsxs)(p.Ph,{value:d.preferred_currency,onValueChange:e=>o({...d,preferred_currency:e}),children:[l.jsx(p.i4,{children:l.jsx(p.ki,{})}),(0,l.jsxs)(p.Bw,{children:[l.jsx(p.Ql,{value:"USD",children:"USD"}),l.jsx(p.Ql,{value:"EUR",children:"EUR"}),l.jsx(p.Ql,{value:"GBP",children:"GBP"}),l.jsx(p.Ql,{value:"CAD",children:"CAD"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[l.jsx(u._,{htmlFor:"notes",children:"Notes"}),l.jsx(j.g,{id:"notes",value:d.notes,onChange:e=>o({...d,notes:e.target.value}),rows:3})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-end",children:[l.jsx(t.z,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),l.jsx(t.z,{type:"submit",disabled:m,children:m?"Saving...":"Save Client"})]})]})})]})},N=()=>{let{currentBusiness:e}=(0,v.i)(),[s,a]=(0,i.useState)(""),[u,j]=(0,i.useState)([]),[p,N]=(0,i.useState)(!0),[w,C]=(0,i.useState)(!1),[b,_]=(0,i.useState)();(0,i.useEffect)(()=>{e&&S()},[e]);let S=async()=>{if(e)try{let{data:s,error:a}=await y.O.from("clients").select("*").eq("business_id",e.id).order("created_at",{ascending:!1});if(a)throw a;j(s||[])}catch(e){console.error("Error fetching clients:",e),g.toast.error("Failed to fetch clients")}finally{N(!1)}},Z=e=>{_(e),C(!0)},k=async e=>{if(confirm("Are you sure you want to delete this client?"))try{let{error:s}=await y.O.from("clients").delete().eq("id",e);if(s)throw s;g.toast.success("Client deleted successfully"),S()}catch(e){g.toast.error(e.message||"Failed to delete client")}},z=u.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.company&&e.company.toLowerCase().includes(s.toLowerCase()));return e?w?l.jsx("div",{className:"space-y-6",children:l.jsx(f,{client:b,onSave:()=>{C(!1),_(void 0),S()},onCancel:()=>{C(!1),_(void 0)}})}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clients"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your client relationships."})]}),(0,l.jsxs)(t.z,{onClick:()=>C(!0),className:"bg-blue-600 hover:bg-blue-700",children:[l.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Add Client"]})]}),(0,l.jsxs)(r.Zb,{className:"p-6",children:[l.jsx("div",{className:"flex items-center gap-4 mb-6",children:(0,l.jsxs)("div",{className:"relative flex-1 max-w-md",children:[l.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(c.I,{placeholder:"Search clients...",value:s,onChange:e=>a(e.target.value),className:"pl-10"})]})}),p?(0,l.jsxs)("div",{className:"text-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Loading clients..."})]}):0===z.length?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-600",children:"No clients found."})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(e=>(0,l.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:l.jsx(o.Z,{className:"w-5 h-5"})}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.company&&l.jsx("p",{className:"text-sm text-gray-500",children:e.company})]})]}),(0,l.jsxs)("div",{className:"flex gap-1",children:[l.jsx(t.z,{variant:"ghost",size:"sm",onClick:()=>Z(e),children:l.jsx(m.Z,{className:"w-4 h-4"})}),l.jsx(t.z,{variant:"ghost",size:"sm",onClick:()=>k(e.id),children:l.jsx(h.Z,{className:"w-4 h-4 text-red-500"})})]})]}),(0,l.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(x.Z,{className:"w-4 h-4"}),e.email]}),e.phone&&l.jsx("p",{className:"text-sm text-gray-600",children:e.phone})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 mb-4",children:(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Currency"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.preferred_currency})]})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx(t.z,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),l.jsx(t.z,{variant:"outline",size:"sm",className:"flex-1",children:"New Invoice"})]})]},e.id))})]})]}):l.jsx("div",{children:"Loading..."})}}};